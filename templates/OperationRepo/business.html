<!-- Homepage - links to our various html pages for business, users and reviews.-->
<!DOCTYPE html>
<html>
<head> 
    <meta charset='utf-8'>
    <title> Operation Repo - Businesses from Yelp Academic DataSet</title>
    <link href="{{STATIC_URL}}css/bootstrap.min.css" rel="stylesheet" media="screen" type="text/css" />
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <style type="text/css">
    .key {width: 150px;display:inline-block;}
    </style>
</head>

<body>
    <div class='container'>
        <h1>Operation Repo - Businesses</h1>
        <!-- Responsive Nav Bar -->
        <div class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://www.cs.utexas.edu/users/downing/cs373/drupal/idb1">CS 373 IDB1</a>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">

                      <li><a href="{% url 'index' %}">Home Page</a></li>
                      <li class="active dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Businesses<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="{% url 'business' 1 %}">Thai Pan Fresh Exotic Cuisine</a></li>
                          <li><a href="{% url 'business' 2 %}">Salon Lola</a></li>
                          <li><a href="{% url 'business' 3 %}">Chipotle Mexican Grill</a></li>
                        </ul>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reviews<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="{% url 'review' 1 %}">Review for Thai Pan Fresh Exotic Cuisine</a></li>
                          <li><a href="{% url 'review' 2 %}">Review for Salon Lola</a></li>
                          <li><a href="{% url 'review' 3 %}">Review for Chipotle Mexican Grill</a></li>
                        </ul>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Users<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="{% url 'user' 1 %}">User 1</a></li>
                          <li><a href="{% url 'user' 2 %}">User 2</a></li>
                          <li><a href="{% url 'user' 3 %}">User 3</a></li>
                        </ul>
                      </li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div><!--/.container-fluid -->
        </div>
        <div class="jumbotron">
            <h1><a href="{{yelpurl}}">{{business.name}}</a></h1>
            <div><span class="key">ID: </span><span class="value">{{business.business_id }} </span></div>
            <div><span class="key">Still Running:</span><span class="value">{{ business.is_open}}</span></div>
            <div>  
                <h2>Location:</h2>
                <div><span class="key">Address:</span><span class="value">{{ business.full_address}}</span></div>
                <div><span class="key">Longitude:</span><span class="value">{{ business.longitude}}</span></div>
                <div><span class="key">Latitude:</span><span class="value">{{ business.latitude}}</span></div>    
                {{iframeurl|safe}}
            </div>
            <div>  
                <h2>Hours:</h2>
                {% if business.getHours|length > 0 %}
                    {% for day,hours in business.getHours.items %}
                        <div><span class="key">{{day}}:</span><span class="value">{{hours.open}} - {{hours.close}}</span></div>
                    {%endfor %}
                {% else %}
                    <div>Hours not available. </div>
                {% endif %}
            </div>
            <div>  
                <h2>Reviews:</h2>
                <div><span class="key"># Reviews:</span><span class="value">{{ business.review_count}}</span></div>    
                <div><span class="key">Stars:</span><span class="value">{{ business.stars}}</span></div>
                <table>
                    <tr>
                        <td class="key">Good for:</td>
                        <td>
                            {% for key,value in goodfor.items %}
                                {% ifequal value True %}
                                    <div class="btn-success"><span>{{ key }}:</span><span class="value">Yes</span></div>
                                {% else %}
                                    <div class="btn-danger"><span>{{ key }}:</span><span class="value">No</span></div>
                                {%endifequal%}
                            {%endfor%}
                        </td>
                    </tr>
                    <tr><td></td><td><br></td></tr>
                    <tr>
                        <td class="key">Parking:</td>
                        <td>
                            {% for key,value in Parking.items %}
                                {% ifequal value True %}
                                    <div class="btn-success"><span>{{ key }}:</span><span class="value">Yes</span></div>
                                {% else %}
                                    <div class="btn-danger"><span>{{ key }}:</span> <span class="value">No</span></div>
                                {%endifequal%}
                            {%endfor%}
                        </td>
                    </tr>
                </table>   
                <div><a href="{% url 'review' a %}"><span class="string">Review</span></a></div>
                <div><a href="{% url 'user' a %}">User who has reviewed</span></a></div>
            </div>
            <div>  
                <h2>Metadata:</h2>
                <div><span class="key">Categories:</span><span class="value">
                {% if business.categoryList|length > 0 %}
                    {% for category in business.categoryList %}{{category}},{%endfor%}
                {% else %}
                    Categories not available.
                {% endif %}
                </span></div>
                <div><span class="key">Neighborhoods:</span><span class="value">
                {% if business.neighborhoodList|length > 0 %}
                    {% for neighborhood in business.neighborhoodList %}{{neighborhood}},{%endfor%}
                {% else %}
                    Neighborhoods not available.
                {% endif %}
                </span></div>

                {% for key,value in attributes.items %}
                    {% ifequal value True %}
                        <div ><span class="key">{{ key }}:</span><span class="value">Yes</span></div>
                    {%else%}
                        {% ifequal value False %}
                            <div><span class="key">{{ key }}:</span><span class="value">Yes</span></div>
                        {%else%}
                            <div><span class="key">{{ key }}:</span><span class="value">{{value}}</span></div>
                        {%endifequal%}
                    {%endifequal%}
                {%endfor%}
                <div><span class="key">Type:</span><span class="value">{{business.json_type}}</span></div>
            </div>
            <div>  
                <h2>Attributes:</h2>
                {% if business.getAttributes|length > 0 %}
                    {% for key,value in business.getAttributes.items %}
                        <div><span class="key">{{key}}:</span><span class="value">{{value}}</span></div>
                    {%endfor %}
                {% else %}
                    <div>Attributes not available. </div>
                {% endif %}
            </div>
            <div>
                <h2><a data-toggle="collapse" href="#collapseJSON">Raw JSON:</a></h2>
                <pre class="prettyprint collapse" id="collapseJSON">{{json}}</pre>
            </div>            
        </div>
    </div>

    <!-- Bootstrap -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="{{STATIC_URL}}js/bootstrap.min.js"></script>
</body>
</html>
